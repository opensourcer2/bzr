<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Introducing the Glade Catalog</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="Glade UI Builder Reference Manual">
<link rel="up" href="catalog.html" title="Part I. Adding your custom widgets">
<link rel="prev" href="catalog.html" title="Part I. Adding your custom widgets">
<link rel="next" href="widgetclasses.html" title="Widget Class Definitions">
<meta name="generator" content="GTK-Doc V1.10 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="part" href="catalog.html" title="Part I. Adding your custom widgets">
<link rel="part" href="core.html" title="Part II. Glade Core">
<link rel="part" href="dockables.html" title="Part III. Dockable Glade UI Widgets">
<link rel="part" href="misc.html" title="Part IV. Miscellaneous utilities">
<link rel="index" href="ix01.html" title="Index">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle">
<td><a accesskey="p" href="catalog.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="catalog.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">Glade UI Builder Reference Manual</th>
<td><a accesskey="n" href="widgetclasses.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry" lang="en">
<a name="catalogintro"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle">Introducing the Glade Catalog</span></h2>
<p>Writing catalogs — 
How to write and install a catalog
    </p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1" lang="en">
<a name="id304519"></a><h2>Introduction</h2>
<p>
The widgets that are available in the Glade UI builder are handled in a
dynamic way and additional widgets can be added, for example from other
libraries, by installing a widget plugin.
    </p>
<p>
A widget plugin consists of a catalog file and a shared library and
icons for the widgets to use in the widget palette and widget tree.
    </p>
<p>
The catalog file is written in an XML format that will be described
below. There is also a DTD for the format which can be found in the widgets
directory of the glade-3 package.
    </p>
<p>
Many properties of widgets can be handled automatically by the GObject
introspection features. Not all of them can though, and advanced widgets
often also need additional support from code. This is specified in the
catalog file, where you can override default values, hide properties,
specify functions to call in the installed plugin, etc.
    </p>
<p>
The catalog file is also used to group the widgets in groups that
correspond to the groups in the Glade widget palette.
    </p>
<p>
In theory, the catalog file should be enough, but many widgets also need
supporting code to be usable in Glade, which is where the plugin library
comes in. An example of both a catalog file and plugin library can be
found in the Glade sources, since the GTK+ widget set that is supported
by default in Glade also is implemented this way. The catalog file is
located in widgets/gtk+.xml, and the source code in src/glade-gtk.c. The
catalog file starts by specifying the name of the catalog and the plugin
library to use:
      </p>
<pre class="programlisting">
&lt;glade-catalog name="gtk+" library="gladegtk"&gt;

  &lt;init-function&gt;my_catalog_init&lt;/init-function&gt;

  &lt;glade-widget-classes&gt;

    ... widget classes go here

  &lt;/glade-widget-classes&gt;

  ... widget groups go here

&lt;/glade-catalog&gt;</pre>
<p>
    </p>
</div>
<div class="refsect1" lang="en">
<a name="id304569"></a><h2>Toplevel catalog properties and tags</h2>
<p>
When defining the catalog, the 'name' and 'library' 
are both manditory attributes of the 'glade-catalog' tag; optionally
you can also use 'icon-prefix', 'depends' and 'domain'.
    </p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">name</span></p></td>
<td><p>
The 'name' property is simply a string identifier for the catalog in 
question, it will be used to identify your catalog so that the glade file can explicitly
require it and to manage inter catalog dependencies.
          </p></td>
</tr>
<tr>
<td><p><span class="term">icon-prefix</span></p></td>
<td><p>
The 'icon-prefix' attribute is used to form icon names for widgets. This property defaults
to the value of the 'name' attribute.
          </p></td>
</tr>
<tr>
<td><p><span class="term">library</span></p></td>
<td><p>
The 'library' property is a shorthand name for the plugin library which shall 
be dlopen'd from <code class="literal">$prefix/lib/glade-3/modules/</code>
          </p></td>
</tr>
<tr>
<td><p><span class="term">depends</span></p></td>
<td><p>
The 'depends' property is used for inheritance of support code to work 
properly  (i.e. if your object derives from an object in gtk+, you'll want the default 
support code in the gladegtk plugin to be enabled for your widget too). This property's 
value is the `name' property of another installed glade plugin; usually you'll want to
declare: 'depends="gtk+"' for your plugin.
          </p></td>
</tr>
<tr>
<td><p><span class="term">domain</span></p></td>
<td><p>
The 'domain' property is the domain in which to search for translatable 
strings from the catalog file (such as glade-widget-group `title's and such; translatable
values will be marked in this document as we go along and should be any strings
that are displayed in the glade UI). If the 'domain' property is not specified,
the library property will be used in it's stead.
          </p></td>
</tr>
<tr>
<td><p><span class="term">book</span></p></td>
<td><p>
The 'book' property is used to specify a namespace to search devhelp docs library with
(specificly, it is the $(DOC_MODULE) that you specified in your gtk-doc Makefile.am).
          </p></td>
</tr>
<tr>
<td><p><span class="term">fixed</span></p></td>
<td><p>
The 'fixed' property is used to mark a <span class="type">GladeWidgetClass</span> for free form placement capacities
to be handled with a <a class="link" href="GladeFixed.html" title="GladeFixed"><span class="type">GladeFixed</span></a>.
          </p></td>
</tr>
<tr>
<td><p><span class="term">init-function</span></p></td>
<td><p>
The 'init-function' tag is used to retrieve an optional global entry point to your plugin; 
if you need to initialize any backends or whatnot this is a good place. 
Your catalog's init-function will be called before any widget classes are instantiated.
          </p></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1" lang="en">
<a name="id342309"></a><h2>Validating and installing</h2>
<p>
The DTD that is shipped with Glade can be used to validate your catalog
file. Note that properties must be entered in the same order as they are
specified in the DTD for the validation to pass.
    </p>
<p>
To validate a file, do this:
      </p>
<pre class="programlisting">xmllint --dtdvalid glade-catalog.dtd --noout my-catalog.xml</pre>
<p>
    </p>
<p>
To install a widget plugin, the catalog XML file should be copied into
the catalog directory, which can be retrieved as:
      </p>
<pre class="programlisting">pkg-config --variable=catalogdir gladeui-1.0</pre>
<p>
The icons for palette etc go into the pixmap directory:
      </p>
<pre class="programlisting">pkg-config --variable=pixmapdir gladeui-1.0</pre>
<p>
The plugin library should be installed into the modules directory:
      </p>
<pre class="programlisting">pkg-config --variable=moduledir gladeui-1.0</pre>
<p>
    </p>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.10</div>
</body>
</html>
